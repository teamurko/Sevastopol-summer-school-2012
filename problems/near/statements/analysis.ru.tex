Каждой вершине дерева поставим в соответствие $6$ состояний:
[стоим на папке или внутри нее] x [как отсортированы файлы в текущей директории].
Переходы между состояниями бывают трех типов:
изменить порядок сортировки за $t$ секунд,
переместиться на $1$ вверх/вниз за $1$ секунду,
нажать <<Enter>> за $1$ секунду.
После построения графа состояний и переходов
нужно найти крайчайшие пути из одной вершины, можно
Дейкстру с кучей писать, а можно попробовать обход в ширину с релаксацией.
